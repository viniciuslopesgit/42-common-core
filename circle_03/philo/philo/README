Philosopher Project (42 School)

SimulaÃ§Ã£o concorrente do clÃ¡ssico problema dos filÃ³sofos.

ğŸ§  Sobre o projeto

O objetivo Ã© implementar uma simulaÃ§Ã£o multithread usando pthread, mutexes e sincronizaÃ§Ã£o precisa, evitando data races, deadlocks e erros temporais.

A tua versÃ£o:

âœ” Sem deadlocks
âœ” Sem data races
âœ” Timestamp preciso
âœ” Monitor de morte funcional
âœ” Suporta limite opcional de refeiÃ§Ãµes
âœ” CompatÃ­vel com o LazyPhiloTester
âœ” Zero memory leaks
âœ” CÃ³digo norm-conforme

ğŸ— CompilaÃ§Ã£o
./philo <n_philos> <time_to_die> <time_to_eat> <time_to_sleep> [must_eat]

./philo 4 800 200 200 3


ParÃ¢metros
ParÃ¢metro	Significado
n_philos	NÃºmero de filÃ³sofos (>= 1)
time_to_die	Tempo mÃ¡ximo sem comer (ms)
time_to_eat	Tempo que demora a comer
time_to_sleep	Tempo que dorme depois de comer
must_eat (opcional)	Programa termina quando TODOS comerem este nÃºmero

-- 

ğŸ”§ CompilaÃ§Ã£o e flags

-pthread

-Wall -Wextra -Werror

Estritamente sem variÃ¡vel global

Total thread safety

--

ğŸ›¡ ProteÃ§Ãµes implementadas

Mutex para exclusÃ£o de print

Mutex para atualizar tempo da Ãºltima refeiÃ§Ã£o

Mutexes de forks independentes

Desfasamento inicial para evitar contenda

Monitor independente para morte

SaÃ­da limpa com pthread_join

--


Valgrind

valgrind --leak-check=full ./philo 4 800 200 200

âœ” zero leaks
âœ” zero UP/UR
âœ” zero invalid reads/writes

--


        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚        main.c         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
         parse_args â”‚
                    â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚       init_program        â”‚
     â”‚  - load params            â”‚
     â”‚  - set start_time         â”‚
     â”‚  - init print_mutex       â”‚
     â”‚  - init meal_mutex        â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚        init_forks         â”‚
     â”‚  - init n mutex forks     â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚        init_philos        â”‚
     â”‚  - assign forks L/R       â”‚
     â”‚  - store last_meal        â”‚
     â”‚  - bind program pointer   â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚       thread_create       â”‚
     â”‚  - N philo threads        â”‚
     â”‚  - 1 monitor thread       â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚        philo_routine        â”‚
     â”‚  LOOP:                      â”‚
     â”‚   take forks                â”‚
     â”‚   eat â†’ update last_meal    â”‚
     â”‚   sleep                     â”‚
     â”‚   think                     â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚        death_monitor         â”‚
     â”‚  - scans all philos          â”‚
     â”‚  - lock meal_mutex           â”‚
     â”‚  - check (now - last_meal)   â”‚
     â”‚  - if > t_die â†’ print death  â”‚
     â”‚  - stop simulation           â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

